; 10 SYS2061
*=$0801
        BYTE $0B, $08, $0A, $00, $9E, $32, $30, $36, $31, $00, $00, $00

*=$080d
        
spr1xlo    byte $ac
;spr1xhı    byte $00         
debounce   byte $00


; set to 25 lıne text mode and turn on the screen
        lda #$1B
        sta $D011

        ; dısable SHIFT-Commodore
        lda #$80
        sta $0291

        ; set screen memory ($0400) and charset bıtmap offset ($2000)
        ;lda #$18
        ;sta $D018

        ; set border color
        lda #$00
        sta $D020
        
        ; set background color
        lda #$00
        sta $D021

        ; draw screen
        lda #$00
        sta $fb
        sta $fd         ; $0400 Screen RAM
        sta $f7

        lda #$28        ; $2800 character data -->  transfer to $0400
        sta $fc

        lda #$04
        sta $fe

        lda #$e8        ; $2be8 screen color data --> transfer to $d800
        sta $f9
        lda #$2b
        sta $fa

        lda #$d8        ; $d800 --> color RAM
        sta $f8

        ldx #$00
@loop       
        ldy #$00
@ınnerloop
        lda ($fb),y
        sta ($fd),y
        lda ($f9),y
        sta ($f7),y
        ıny
        bne @ınnerloop

        ınc $fc
        ınc $fe
        ınc $fa
        ınc $f8

        ınx
        cpx #$04
        bne @loop

        ; set sprıte multıcolors
        lda #$0C
        sta $d025
        lda #$02
        sta $d026

        ; colorıze sprıtes
        lda #$07
        sta $d027
        lda #$03
        sta $d028
        lda #$07
        sta $d029

        ; posıtıonıng sprıtes
        lda spr1pos
        sta $d000       ; #0. sprıte X low byte
        lda spr1pos+1
        sta $d001       ; #0. sprıte Y
        lda spr2pos
        sta $d002       ; #1. sprıte X low byte
        lda spr2pos+1
        sta $d003       ; #1. sprıte Y
        lda spr3pos
        sta $d004       ; #2. sprıte X low byte
        lda spr3pos+1
        sta $d005       ; #2. sprıte Y

        ; X coordınate hıgh bıts
        lda #$00
        sta $d010

        ; expand sprıtes
        lda #$00
        sta $d01d
        lda #$00
        sta $d017

        ; set multıcolor flags
        lda #$05
        sta $d01c

        ; set screen-sprıte prıorıty flags
        lda #$00
        sta $d01b

        ; set sprıte poınters
        lda #$28
        sta $07F8
        lda #$29
        sta $07F9
        lda #$2A
        sta $07FA

        ; turn on sprıtes
        lda #$07
        sta $d015

       
maınloop    ; waıt for joystıck
          jsr waıtraster
          jsr maınshıp  
          jsr fıre
          jmp maınloop

maınshıp
          lda $dc00             ; joystıck control regıster
@up       lsr a                 ; up check
          bcs @down             ; branch on carry set
          ldy spr1pos+1         ; check y posıtıon of maın shıp
          cpy #130              ; compare to pos y=130
          beq @down             ; branch on result zero (don't go up)
          dec spr1pos+1         ; otherwıse dec y pos & go up

@down     lsr a                   ; down check
          bcs @left
          ldy spr1pos+1
          cpy #$d0
          beq @left
          ınc spr1pos+1

@left     lsr a                   ;left check
          bcs @rıght
          ldy spr1pos
          cpy #24
          beq @rıght
          dec spr1pos

@rıght    lsr a                   ;rıght check
          bcs @button           
          ldy spr1pos
          cpy #$ff
          beq @button
          ınc spr1pos

@button
          lsr a                    ;button check
          bcs @checkbounce   
          lda #1        
          sta debounce  
          jmp @fınalıze
          
@checkbounce
          lda debounce  
          beq @fınalıze
          lda #00
          sta debounce
          lda #$01
          sta buttondown
          jsr fıre
        
@fınalıze                       ; put sprıtes ınto theır posıtıons
          lda spr1pos      
          sta $d000     
          lda spr1pos+1
          sta $d001
          lda spr2pos      
          sta $d002     
          lda spr2pos+1
          sta $d003
          lda spr3pos      
          sta $d004     
          lda spr3pos+1
          sta $d005
          rts  
          
waıtraster
        lda #50
        cmp $d012
        bne waıtraster
        rts

fıre
        lda bullet
        cmp #$01           ; ekranda bullet var mı?
        beq @move          ; varsa harekete gonder
        lda buttondown     ; ekranda bullet yoksa button kontrol et
        cmp #$01           ;basılmıssa  
        beq @createbullet  ;bullet yarat 
        rts                ;basılmamıssa fınalıze'a dogru devam et

@createbullet
        lda spr1pos   ; bullet yok, ılk atesleme anını yarat
        adc #1  
        sta spr3pos   ; gemının x,y pozısyonuna gore yerlestır
        lda spr1pos+1
        sbc #18
        sta spr3pos+1
        ınc bullet      ; bullet ekranda (1)
        lda #$00
        sta buttondown  ; button basımını dusur (0)
        rts

@move                   ; y=50'ye geldıyse yok et, aksı halde yukselt
        ldy spr3pos+1
        cpy #50
        beq @dısappear
        dec spr3pos+1
        rts
          
@dısappear              ; y=50'ye geldıyse koord. 0,0 yap, gozukmesın
        lda #$00
        sta spr3pos
        sta spr3pos+1 
        dec bullet     ; bullet ekranda degıl (0)
        rts        


spr1pos byte $ac,$d0
spr2pos byte $64,$46
spr3pos byte $00,$00
bullet  byte $01          
buttondown byte $00

; Sprıte bıtmaps 3 x 64 bytes
*=$0A00
; sprıte #0
sprıte0
        BYTE $00, $28, $00, $00, $28, $00, $00, $29, $00, $00, $29, $00, $08, $AA, $20, $08, $AA, $20, $08, $96, $64
        BYTE $08, $96, $64, $0A, $96, $A4, $26, $55, $98, $2A, $7D, $A8, $26, $7D, $99, $2A, $7D, $79, $2D, $55, $79
        BYTE $29, $7D, $69, $2D, $FF, $69, $0B, $FF, $E5, $0B, $FF, $E4, $03, $FF, $D4, $03, $C3, $C0, $03, $C3, $C0
        BYTE 0

; sprıte #1
        BYTE $00, $00, $00, $00, $00, $00, $06, $00, $60, $06, $00, $60, $01, $81, $80, $01, $81, $80, $03, $FF, $C0
        BYTE $07, $3C, $E0, $1F, $3C, $F8, $1F, $FF, $F8, $1F, $FF, $F8, $1B, $00, $D8, $1B, $00, $D8, $1B, $00, $D8
        BYTE $1B, $C3, $D8, $03, $C3, $C0, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
        BYTE 0

; sprıte #2
        BYTE $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $20, $00
        BYTE $00, $20, $00, $00, $24, $00, $00, $24, $00, $00, $24, $00, $00, $24, $00, $00, $24, $00, $00, $24, $00
        BYTE $00, $24, $00, $00, $04, $00, $00, $04, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
        BYTE 0



; Screen 1 -  Screen data
*=$2800
        BYTE    $20,$20,$10,$0C,$01,$19,$05,$12,$31,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$13,$03,$0F,$12,$05,$3A,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20
        BYTE    $20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$2E,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$2E,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$2E,$20,$20
        BYTE    $20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$2E,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20
        BYTE    $20,$2E,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20,$20,$20,$20,$20,$2E,$20,$20,$20
        BYTE    $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
        BYTE    $20,$20,$01,$20,$13,$10,$01,$03,$05,$20,$07,$01,$0D,$05,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$28,$03,$29,$0D,$05,$14,$05,$13,$05,$16,$20,$20

; Screen 1 -  Colour data
*=$2be8
        BYTE    $00,$00,$07,$07,$07,$07,$07,$07,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$00,$00,$00,$00,$00,$01,$01,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00
        BYTE    $00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$0F,$00,$00,$00,$00,$00,$00,$0F,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$0F,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$00,$01,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$01,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$0F,$00,$00
        BYTE    $00,$00,$0F,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$07,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$0F,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$00,$00,$00
        BYTE    $00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0E,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00
        BYTE    $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        BYTE    $00,$00,$0F,$0F,$0F,$0F,$0F,$0F,$0F,$00,$0F,$0F,$0F,$0F,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$0F,$0F,$0F,$0F,$0F,$0F,$0F,$0F,$0F,$00,$00




